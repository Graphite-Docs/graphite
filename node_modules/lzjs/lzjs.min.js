/*!
 * lzjs v1.3.0 - Compression by LZ algorithm in JavaScript.
 * Copyright (c) 2014-2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("lzjs",this,function(){"use strict";function a(a){this._init(a)}function b(a){this._init(a)}function c(a){this._init(a)}function d(a){this._init(a)}function e(){var a,b,c,d,e="abcdefghijklmnopqrstuvwxyz",f="",g=e.length;for(a=0;g>a;a++)for(c=e.charAt(a),b=g-1;b>15&&f.length<D;b--)d=e.charAt(b),f+=" "+c+" "+d;for(;f.length<D;)f=" "+f;return f=f.slice(0,D)}function f(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)}function g(a,b){if(null==b?b=a.length:a=f(a,b),t&&u&&w>b){if(x)return q.apply(null,a);if(null===x)try{var c=q.apply(null,a);return b>w&&(x=!0),c}catch(d){x=!1}}return h(a)}function h(a){for(var b,c="",d=a.length,e=0;d>e;){if(b=a.subarray?a.subarray(e,e+w):a.slice(e,e+w),e+=w,!x){if(null===x)try{c+=q.apply(null,b),b.length>w&&(x=!0);continue}catch(f){x=!1}return i(a)}c+=q.apply(null,b)}return c}function i(a){for(var b="",c=a.length,d=0;c>d;d++)b+=q(a[d]);return b}function j(a,b){if(!s)return new Array(b);switch(a){case 8:return new Uint8Array(b);case 16:return new Uint16Array(b)}}function k(a){for(var b=[],c=a&&a.length,d=0;c>d;d++)b[d]=a.charCodeAt(d);return b}function l(a){for(var b,c,d=[],e=0,f=a.length;f>e;e++)b=a.charCodeAt(e),b>=55296&&56319>=b&&f>e+1&&(c=a.charCodeAt(e+1),c>=56320&&57343>=c&&(b=1024*(b-55296)+c-56320+65536,e++)),128>b?d[d.length]=b:2048>b?(d[d.length]=192|b>>6&31,d[d.length]=128|63&b):65536>b?(d[d.length]=224|b>>12&15,d[d.length]=128|b>>6&63,d[d.length]=128|63&b):2097152>b&&(d[d.length]=240|b>>18&15,d[d.length]=128|b>>12&63,d[d.length]=128|b>>6&63,d[d.length]=128|63&b);return g(d)}function m(a){for(var b,c,d,e,f,h,i=[],j=0,k=a.length;k>j;)c=a.charCodeAt(j++),b=c>>4,b>=0&&7>=b?h=c:12===b||13===b?(d=a.charCodeAt(j++),h=(31&c)<<6|63&d):14===b?(d=a.charCodeAt(j++),e=a.charCodeAt(j++),h=(15&c)<<12|(63&d)<<6|63&e):15===b&&(d=a.charCodeAt(j++),e=a.charCodeAt(j++),f=a.charCodeAt(j++),h=(7&c)<<18|(63&d)<<12|(63&e)<<6|63&f),65535>=h?i[i.length]=h:(h-=65536,i[i.length]=(h>>10)+55296,i[i.length]=h%1024+56320);return g(i)}function n(a,b){for(var c,d,e=0,f=0,g=a.length;g>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&g>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?e++:e+=2048>c?2:65536>c?3:4;return e}function o(a){var b,c,d,e,f,g;for(d=a.length,c=0,b="";d>c;){if(e=255&a.charCodeAt(c++),c===d){b+=W.charAt(e>>2)+W.charAt((3&e)<<4)+"==";break}if(f=a.charCodeAt(c++),c===d){b+=W.charAt(e>>2)+W.charAt((3&e)<<4|(240&f)>>4)+W.charAt((15&f)<<2)+"=";break}g=a.charCodeAt(c++),b+=W.charAt(e>>2)+W.charAt((3&e)<<4|(240&f)>>4)+W.charAt((15&f)<<2|(192&g)>>6)+W.charAt(63&g)}return b}function p(a){var b,c,d,e,f,g,h;for(g=a.length,f=0,h="";g>f;){do b=X[255&a.charCodeAt(f++)];while(g>f&&-1===b);if(-1===b)break;do c=X[255&a.charCodeAt(f++)];while(g>f&&-1===c);if(-1===c)break;h+=q(b<<2|(48&c)>>4);do{if(d=255&a.charCodeAt(f++),61===d)return h;d=X[d]}while(g>f&&-1===d);if(-1===d)break;h+=q((15&c)<<4|(60&d)>>2);do{if(e=255&a.charCodeAt(f++),61===e)return h;e=X[e]}while(g>f&&-1===e);if(-1===e)break;h+=q((3&d)<<6|e)}return h}var q=String.fromCharCode,r=Object.prototype.hasOwnProperty,s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array,t=!1,u=!1;try{"a"===q.apply(null,[97])&&(t=!0)}catch(v){}if(s)try{"a"===q.apply(null,new Uint8Array([97]))&&(u=!0)}catch(v){}var w=65533,x=null,y=!1;-1!=="abc\u307b\u3052".lastIndexOf("\u307b\u3052",1)&&(y=!0);var z=function(){for(var a="",b={8:1,10:1,11:1,12:1,13:1,92:1},c=0;127>c;c++)r.call(b,c)||(a+=q(c));return a}(),A=z.length,B=Math.max(A,62)-Math.min(A,62),C=A-1,D=1024,E=304,F=w,G=F-A,H=w,I=H+2*D,J=11,K=J*(J+1),L=40,M=L*(L+1),N=A+1,O=B+20,P=A+5,Q=A-B-19,R=L+7,S=R+1,T=S+1,U=T+5,V=U+5;a.prototype={_init:function(a){a=a||{},this._data=null,this._table=null,this._result=null,this._onDataCallback=a.onData,this._onEndCallback=a.onEnd,this._maxBytes=a.maxBytes},_createTable:function(){for(var a=j(8,A),b=0;A>b;b++)a[b]=z.charCodeAt(b);return a},_onData:function(a,b){var c=g(a,b);this._onDataCallback?this._onDataCallback(c):this._result+=c},_onEnd:function(){this._onEndCallback&&this._onEndCallback(),this._data=this._table=null},_search:function(){var a=2,b=this._data,c=this._offset,d=C;if(this._dataLen-c<d&&(d=this._dataLen-c),a>d)return!1;var e,f,g,h,i,j,k=c-E,l=b.substring(k,c+d),m=c+a-3-k;do{if(2===a){if(f=b.charAt(c)+b.charAt(c+1),g=l.indexOf(f),!~g||g>m)break}else 3===a?f+=b.charAt(c+2):f=b.substr(c,a);if(y?(j=b.substring(k,c+a-1),h=j.lastIndexOf(f)):h=l.lastIndexOf(f,m),!~h)break;i=h,e=k+h;do if(b.charCodeAt(c+a)!==b.charCodeAt(e+a))break;while(++a<d);if(g===h){a++;break}}while(++a<d);return 2===a?!1:(this._index=E-i,this._length=a-1,!0)},compress:function(a){if(null==a||0===a.length)return"";var b="",c=this._createTable(),d=e(),f=j(8,F),g=0,h=0;this._result="",this._offset=d.length,this._data=d+a,this._dataLen=this._data.length,d=a=null;for(var i,k,l,m,n,o=-1,p=-1;this._offset<this._dataLen;){if(this._search()?(this._index<C?(k=this._index,l=0):(k=this._index%C,l=(this._index-k)/C),2===this._length?(f[g++]=c[l+U],f[g++]=c[k],h+=2):(f[g++]=c[l+T],f[g++]=c[k],f[g++]=c[this._length],h+=3),this._offset+=this._length,~p&&(p=-1)):(i=this._data.charCodeAt(this._offset++),K>i?(L>i?(k=i,l=0,o=N):(k=i%L,l=(i-k)/L,o=l+N),p===o?(f[g++]=c[k],h++):(f[g++]=c[o-O],f[g++]=c[k],h+=2,p=o)):(M>i?(k=i,l=0,o=P):(k=i%M,l=(i-k)/M,o=l+P),L>k?(m=k,n=0):(m=k%L,n=(k-m)/L),p===o?(f[g++]=c[m],f[g++]=c[n],h+=2):(f[g++]=c[S],f[g++]=c[o-A],f[g++]=c[m],f[g++]=c[n],h+=4,p=o))),h>this._maxBytes)return!1;g>=G&&(this._onData(f,g),g=0)}return g>0&&this._onData(f,g),this._onEnd(),b=this._result,this._result=null,null===b?"":b}},b.prototype={_init:function(a){a=a||{},this._result=null,this._onDataCallback=a.onData,this._onEndCallback=a.onEnd},_createTable:function(){for(var a={},b=0;A>b;b++)a[z.charAt(b)]=b;return a},_onData:function(a){var b;if(this._onDataCallback){if(a)b=this._result,this._result=[];else{var c=H-D;b=this._result.slice(D,D+c),this._result=this._result.slice(0,D).concat(this._result.slice(D+c))}b.length>0&&this._onDataCallback(g(b))}},_onEnd:function(){this._onEndCallback&&this._onEndCallback()},decompress:function(a){if(null==a||0===a.length)return"";this._result=k(e());for(var b,c,d,f,h,i,j,l,m,n,o="",p=this._createTable(),q=!1,r=null,s=a.length,t=0;s>t;t++)if(c=p[a.charAt(t)],void 0!==c){if(Q>c)q?(f=p[a.charAt(++t)],h=f*L+c+M*r):h=r*L+c,this._result[this._result.length]=h;else if(R>c)r=c-Q,q=!1;else if(c===S)d=p[a.charAt(++t)],r=d-5,q=!0;else if(V>c){if(d=p[a.charAt(++t)],U>c?(i=(c-T)*C+d,j=p[a.charAt(++t)]):(i=(c-U)*C+d,j=2),l=this._result.slice(-i),l.length>j&&(l.length=j),m=l.length,l.length>0)for(n=0;j>n;)for(b=0;m>b&&(this._result[this._result.length]=l[b],!(++n>=j));b++);r=null}this._result.length>=I&&this._onData()}return this._result=this._result.slice(D),this._onData(!0),this._onEnd(),o=g(this._result),this._result=null,o}},c.prototype={_init:function(a){a=a||{},this._codeStart=a.codeStart||255,this._codeMax=a.codeMax||65535,this._maxBytes=a.maxBytes},compress:function(a){if(null==a||0===a.length)return"";var b,c,d,e,f="",g=0,h=0,i=a.length,j="",k=this._codeStart+1,l=this._codeMax,m=2,n=[],o=0;for(i>0&&(j=b=a.charAt(h++));i>h;)if(b=a.charAt(h++),c=j+b,e=c.length,d=1<<e,(32>e&&o&d||e>=32&&void 0!==n[e])&&r.call(n[e],c))j+=b;else{if(1===j.length?(f+=j,g++):(f+=n[j.length][j],g+=m),g>this._maxBytes)return!1;l>=k&&(c=j+b,e=c.length,d=1<<e,(32>e&&!(o&d)||e>=32&&void 0===n[e])&&(n[e]={},o|=d),n[e][c]=q(k++),2048===k&&(m=3)),j=b}return 1===j.length?(f+=j,g++):(f+=n[j.length][j],g+=m),g>this._maxBytes?!1:f},decompress:function(a){if(null==a||0===a.length)return"";var b,c,d,e,f="",g={},h=this._codeStart+1,i=this._codeStart,j=0,k=a.length;for(k>0&&(b=a.charCodeAt(j++),c=q(b),f+=c,d=c);k>j;)b=a.charCodeAt(j++),e=i>=b?q(b):r.call(g,b)?g[b]:d+c,f+=e,c=e.charAt(0),g[h++]=d+c,d=e;return f}},d.prototype={
_init:function(a){a=a||{},this._encoding=a.encoding||"utf-8"},compress:function(b){if(null==b||0===b.length)return"";b=""+b;var d,e="",f=n(b),g=.9*f|0,h=b.length,i={maxBytes:f};return f===h?(d="W",i.codeStart=127,i.codeMax=2047,e=new c(i).compress(b),e===!1&&(d="S",e=new a(i).compress(b),e===!1&&(d="N",e=b))):f>h&&h>g?(d="U",e=new c(i).compress(l(b)),e===!1&&(d="S",e=new a(i).compress(b),e===!1&&(d="N",e=b))):(d="S",e=new a(i).compress(b),e===!1&&(d="U",e=new c(i).compress(l(b)),(e===!1||n(e)>f)&&(d="N",e=b))),d+e},decompress:function(a){if(null==a||0===a.length)return"";a=""+a;var b=a.charAt(0);switch(b){case"S":return this._decompressByS(a.substring(1));case"W":return this._decompressByW(a.substring(1));case"U":return this._decompressByU(a.substring(1));case"N":return this._decompressByN(a.substring(1));default:return a}},_decompressByS:function(a){return(new b).decompress(a)},_decompressByW:function(a){var b={codeStart:127,codeMax:2047};return new c(b).decompress(a)},_decompressByU:function(a){return m((new c).decompress(a))},_decompressByN:function(a){return a}};var W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],Y={compress:function(a,b){return new d(b).compress(a)},decompress:function(a,b){return new d(b).decompress(a)},compressToBase64:function(a,b){return o(l(new d(b).compress(a)))},decompressFromBase64:function(a,b){return new d(b).decompress(m(p(a)))}};return Y});